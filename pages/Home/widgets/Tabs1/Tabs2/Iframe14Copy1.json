{
  "animateLoading": true,
  "borderOpacity": 100,
  "borderRadius": "{{appsmith.theme.borderRadius.appBorderRadius}}",
  "borderWidth": 1,
  "bottomRow": 71,
  "boxShadow": "{{appsmith.theme.boxShadow.appBoxShadow}}",
  "dynamicBindingPathList": [
    {
      "key": "borderRadius"
    },
    {
      "key": "boxShadow"
    },
    {
      "key": "srcDoc"
    }
  ],
  "dynamicTriggerPathList": [],
  "flexVerticalAlignment": "start",
  "isLoading": false,
  "isVisible": true,
  "key": "yfx2yv6ci0",
  "leftColumn": 0,
  "mobileBottomRow": 37,
  "mobileLeftColumn": 21,
  "mobileRightColumn": 45,
  "mobileTopRow": 5,
  "needsErrorInfo": false,
  "parentColumnSpace": 22.85107421875,
  "parentId": "p68z8zpfv8",
  "parentRowSpace": 10,
  "renderMode": "CANVAS",
  "responsiveBehavior": "fill",
  "rightColumn": 64,
  "source": "https://www.example.com",
  "srcDoc": "<!DOCTYPE html>\n<html lang=\"pt-BR\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Dashboard - Motoboys Sem Pedido</title>\n    <style>\n        * { margin: 0; padding: 0; box-sizing: border-box; }\n        body {\n            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;\n            background: linear-gradient(135deg, #0ea5e9 0%, #6366f1 100%);\n            min-height: 100vh;\n            padding: 20px;\n        }\n        .container { max-width: 1600px; margin: 0 auto; }\n        .header {\n            background: white;\n            padding: 24px 32px;\n            border-radius: 16px;\n            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);\n            margin-bottom: 24px;\n        }\n        .header h1 { font-size: 28px; font-weight: 800; color: #111827; margin-bottom: 8px; }\n        .header p { color: #6b7280; font-size: 14px; }\n        .kpis {\n            display: grid;\n            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));\n            gap: 16px;\n            margin-bottom: 24px;\n        }\n        .kpi-card {\n            background: white;\n            padding: 20px;\n            border-radius: 12px;\n            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);\n            border-left: 4px solid;\n        }\n        .kpi-card.primary { border-left-color: #0ea5e9; }\n        .kpi-card.success { border-left-color: #10b981; }\n        .kpi-card.warning { border-left-color: #f59e0b; }\n        .kpi-card.danger { border-left-color: #ef4444; }\n        .kpi-label { font-size: 12px; color: #6b7280; text-transform: uppercase; font-weight: 600; margin-bottom: 8px; }\n        .kpi-value { font-size: 32px; font-weight: 800; color: #111827; margin-bottom: 4px; }\n        .kpi-subtitle { font-size: 13px; color: #9ca3af; }\n        .filters-card {\n            background: white;\n            padding: 24px;\n            border-radius: 12px;\n            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);\n            margin-bottom: 24px;\n        }\n        .filters-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 20px; }\n        .filters-header h3 { font-size: 18px; font-weight: 700; color: #111827; }\n        .filters-grid {\n            display: grid;\n            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n            gap: 16px;\n            margin-bottom: 16px;\n        }\n        .filter-group { display: flex; flex-direction: column; }\n        .filter-group label { font-size: 12px; font-weight: 600; color: #374151; margin-bottom: 6px; }\n        .filter-group select,\n        .filter-group input {\n            padding: 10px 12px;\n            border: 2px solid #e5e7eb;\n            border-radius: 8px;\n            font-size: 14px;\n            transition: all 0.2s;\n            background: white;\n        }\n        .filter-group select:focus,\n        .filter-group input:focus {\n            outline: none;\n            border-color: #0ea5e9;\n            box-shadow: 0 0 0 3px rgba(14, 165, 233, 0.2);\n        }\n        .filter-buttons { display: flex; gap: 12px; }\n        .btn {\n            padding: 10px 20px;\n            border: none;\n            border-radius: 8px;\n            font-size: 14px;\n            font-weight: 600;\n            cursor: pointer;\n            transition: all 0.2s;\n            display: inline-flex;\n            align-items: center;\n            gap: 8px;\n        }\n        .btn-primary { background: #0ea5e9; color: white; }\n        .btn-primary:hover { background: #0284c7; transform: translateY(-2px); box-shadow: 0 4px 12px rgba(14, 165, 233, 0.4); }\n        .btn-secondary { background: #f3f4f6; color: #374151; }\n        .btn-secondary:hover { background: #e5e7eb; }\n        .tabs {\n            display: flex;\n            gap: 8px;\n            margin-bottom: 0;\n            background: white;\n            padding: 16px 16px 0 16px;\n            border-radius: 12px 12px 0 0;\n            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);\n        }\n        .tab {\n            padding: 12px 24px;\n            background: transparent;\n            border: none;\n            border-radius: 8px 8px 0 0;\n            font-size: 14px;\n            font-weight: 600;\n            color: #6b7280;\n            cursor: pointer;\n            transition: all 0.2s;\n        }\n        .tab:hover { background: #f3f4f6; color: #374151; }\n        .tab.active { background: linear-gradient(135deg, #0ea5e9 0%, #6366f1 100%); color: white; }\n        .content-card {\n            background: white;\n            padding: 24px;\n            border-radius: 0 0 12px 12px;\n            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);\n        }\n        .tab-content { display: none; }\n        .tab-content.active { display: block; }\n        .table-wrapper { overflow-x: auto; border-radius: 8px; border: 1px solid #e5e7eb; }\n        table { width: 100%; border-collapse: collapse; background: white; }\n        thead { background: linear-gradient(135deg, #0ea5e9 0%, #6366f1 100%); color: white; }\n        th { padding: 14px 16px; text-align: left; font-size: 12px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px; white-space: nowrap; }\n        td { padding: 14px 16px; border-bottom: 1px solid #f3f4f6; font-size: 14px; color: #374151; }\n        tbody tr { transition: all 0.2s; }\n        tbody tr:hover { background: #f9fafb; }\n        .td-strong { font-weight: 700; color: #111827; }\n        .td-muted { color: #9ca3af; }\n        .badge { display: inline-block; padding: 4px 12px; border-radius: 12px; font-size: 12px; font-weight: 600; white-space: nowrap; }\n        .badge-info { background: #e0f2fe; color: #0369a1; }\n        .badge-warning { background: #fef3c7; color: #92400e; }\n        .group-cards { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 16px; margin-bottom: 20px; }\n        .group-card { background: white; border: 2px solid #e5e7eb; border-radius: 12px; padding: 20px; transition: all 0.3s; }\n        .group-card:hover { border-color: #0ea5e9; box-shadow: 0 4px 16px rgba(14, 165, 233, 0.2); transform: translateY(-2px); }\n        .group-card-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px; padding-bottom: 12px; border-bottom: 2px solid #f3f4f6; }\n        .group-card-title { font-size: 16px; font-weight: 700; color: #111827; }\n        .group-card-count { font-size: 24px; font-weight: 800; color: #0ea5e9; }\n        .group-card-body { display: flex; flex-direction: column; gap: 8px; }\n        .group-stat { display: flex; justify-content: space-between; align-items: center; font-size: 13px; }\n        .group-stat-label { color: #6b7280; }\n        .group-stat-value { font-weight: 600; color: #111827; }\n        .empty-state { text-align: center; padding: 60px 20px; color: #9ca3af; }\n        .empty-state-icon { font-size: 48px; margin-bottom: 16px; }\n        .empty-state-text { font-size: 16px; font-weight: 600; }\n        .pagination { display: flex; align-items: center; justify-content: center; gap: 8px; margin-top: 20px; padding: 16px; }\n        .pagination button {\n            padding: 8px 16px;\n            border: 2px solid #e5e7eb;\n            background: white;\n            border-radius: 8px;\n            font-size: 14px;\n            font-weight: 600;\n            color: #374151;\n            cursor: pointer;\n            transition: all 0.2s;\n        }\n        .pagination button:hover:not(:disabled) { border-color: #0ea5e9; color: #0ea5e9; }\n        .pagination button:disabled { opacity: 0.4; cursor: not-allowed; }\n        .pagination button.active { background: #0ea5e9; color: white; border-color: #0ea5e9; }\n        .pagination-info { font-size: 14px; color: #6b7280; margin: 0 12px; }\n        .loading { display: flex; align-items: center; justify-content: center; padding: 40px; color: #6b7280; font-size: 14px; }\n        .spinner { border: 3px solid #f3f4f6; border-top: 3px solid #0ea5e9; border-radius: 50%; width: 30px; height: 30px; animation: spin 1s linear infinite; margin-right: 12px; }\n        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }\n        @media (max-width: 768px) { body { padding: 12px; } .header h1 { font-size: 22px; } .kpis { grid-template-columns: 1fr; } .filters-grid { grid-template-columns: 1fr; } .tabs { overflow-x: auto; padding: 12px 12px 0 12px; } .tab { padding: 10px 16px; font-size: 13px; } table { font-size: 12px; } th, td { padding: 10px 12px; } }\n    </style>\n</head>\n<body>\n    <div class=\"container\">\n        <div class=\"header\">\n            <h1>üïí Dashboard de Motoboys Sem Pedido</h1>\n            <p>An√°lise de per√≠odos em que motoboys ficaram dispon√≠veis sem pedidos na fila</p>\n        </div>\n\n        <div class=\"kpis\" id=\"kpis\"></div>\n\n        <div class=\"filters-card\">\n            <div class=\"filters-header\">\n                <h3>üîç Filtros</h3>\n            </div>\n            <div class=\"filters-grid\">\n                <div class=\"filter-group\">\n                    <label for=\"filterFilial\">Filial</label>\n                    <select id=\"filterFilial\">\n                        <option value=\"\">Todas as Filiais</option>\n                    </select>\n                </div>\n                <div class=\"filter-group\">\n                    <label for=\"filterMotoboy\">Motoboy</label>\n                    <input type=\"text\" id=\"filterMotoboy\" placeholder=\"Matr√≠cula do motoboy...\">\n                </div>\n                <div class=\"filter-group\">\n                    <label for=\"filterTempo\">Tempo sem pedido (min)</label>\n                    <select id=\"filterTempo\">\n                        <option value=\"\">Todos</option>\n                        <option value=\"0-5\">0 a 5 min</option>\n                        <option value=\"5-15\">5 a 15 min</option>\n                        <option value=\"15-30\">15 a 30 min</option>\n                        <option value=\"30+\">Mais de 30 min</option>\n                    </select>\n                </div>\n            </div>\n            <div class=\"filter-buttons\">\n                <button class=\"btn btn-primary\" onclick=\"applyFilters()\">üîç Aplicar Filtros</button>\n                <button class=\"btn btn-secondary\" onclick=\"clearFilters()\">‚úï Limpar Filtros</button>\n            </div>\n        </div>\n\n        <div class=\"tabs\">\n            <button class=\"tab active\" onclick=\"switchTab('detalhes')\">üìã Detalhes</button>\n            <button class=\"tab\" onclick=\"switchTab('por-filial')\">üè¢ Por Filial</button>\n            <button class=\"tab\" onclick=\"switchTab('por-motoboy')\">üèçÔ∏è Por Motoboy</button>\n        </div>\n\n        <div class=\"content-card\">\n            <div class=\"tab-content active\" id=\"tab-detalhes\">\n                <div class=\"table-wrapper\">\n                    <table>\n                        <thead>\n                            <tr>\n                                <th>Filial</th>\n                                <th>Motoboy</th>\n                                <th>In√≠cio Disponibilidade</th>\n                                <th>Fim Per√≠odo</th>\n                                <th>Tempo Sem Pedido</th>\n                                <th>Motivo Fim</th>\n                            </tr>\n                        </thead>\n                        <tbody id=\"tableDetalhes\"></tbody>\n                    </table>\n                </div>\n                <div class=\"pagination\" id=\"pagination-detalhes\"></div>\n            </div>\n\n            <div class=\"tab-content\" id=\"tab-por-filial\">\n                <div id=\"groupByFilial\" class=\"group-cards\"></div>\n            </div>\n\n            <div class=\"tab-content\" id=\"tab-por-motoboy\">\n                <div id=\"groupByMotoboy\" class=\"group-cards\"></div>\n            </div>\n        </div>\n    </div>\n\n    <script>\n        let rawData = [];\n        let filteredData = [];\n        let currentTab = 'detalhes';\n        let pagination = { currentPage: 1, itemsPerPage: 20 };\n        let activeFilters = { filial: '', motoboy: '', tempo: '' };\n\n        function loadDataFromAppsmith(dados) {\n            try {\n                console.log('üîç Dados recebidos para tempo_ocioso:', dados);\n\n                if (typeof dados === 'string') {\n                    try {\n                        dados = JSON.parse(dados);\n                        console.log('‚úÖ String JSON parseada com sucesso');\n                    } catch (e) {\n                        console.error('‚ùå Erro ao parsear string JSON:', e);\n                    }\n                }\n\n                if (dados && dados.detalhes && Array.isArray(dados.detalhes)) {\n                    rawData = dados.detalhes;\n                } else if (Array.isArray(dados)) {\n                    rawData = dados;\n                } else if (dados && Array.isArray(dados.data)) {\n                    rawData = dados.data;\n                } else {\n                    console.error('‚ùå Formato de dados inv√°lido para tempo_ocioso');\n                    showEmptyState();\n                    return;\n                }\n\n                filteredData = [...rawData];\n                console.log('‚úÖ Registros de tempo_ocioso carregados:', rawData.length);\n\n                populateFilters();\n                updateKPIs(dados && dados.estatisticas ? dados.estatisticas : null);\n                renderCurrentTab();\n            } catch (error) {\n                console.error('‚ùå Erro ao carregar dados tempo_ocioso:', error);\n                showEmptyState();\n            }\n        }\n\n        function populateFilters() {\n            const filiais = [...new Set(rawData.map(d => d.filial))].filter(f => f).sort();\n            const selectFilial = document.getElementById('filterFilial');\n            selectFilial.innerHTML = '<option value=\"\">Todas as Filiais</option>' +\n                filiais.map(f => `<option value=\"${f}\">${f}</option>`).join('');\n        }\n\n        function applyFilters() {\n            activeFilters.filial = document.getElementById('filterFilial').value;\n            activeFilters.motoboy = document.getElementById('filterMotoboy').value.trim();\n            activeFilters.tempo = document.getElementById('filterTempo').value;\n\n            console.log('üîç Aplicando filtros tempo_ocioso:', activeFilters);\n\n            filteredData = rawData.filter(item => {\n                if (activeFilters.filial && item.filial !== activeFilters.filial) return false;\n                if (activeFilters.motoboy && !String(item.matricula).includes(activeFilters.motoboy)) return false;\n\n                if (activeFilters.tempo) {\n                    const tempo = item.tempoSemPedidoMinutos || 0;\n                    if (activeFilters.tempo === '0-5' && (tempo < 0 || tempo > 5)) return false;\n                    if (activeFilters.tempo === '5-15' && (tempo < 5 || tempo > 15)) return false;\n                    if (activeFilters.tempo === '15-30' && (tempo < 15 || tempo > 30)) return false;\n                    if (activeFilters.tempo === '30+' && tempo < 30) return false;\n                }\n\n                return true;\n            });\n\n            pagination.currentPage = 1;\n            updateKPIs();\n            renderCurrentTab();\n        }\n\n        function clearFilters() {\n            document.getElementById('filterFilial').value = '';\n            document.getElementById('filterMotoboy').value = '';\n            document.getElementById('filterTempo').value = '';\n            activeFilters = { filial: '', motoboy: '', tempo: '' };\n            filteredData = [...rawData];\n            pagination.currentPage = 1;\n            updateKPIs();\n            renderCurrentTab();\n        }\n\n        function updateKPIs(estatisticas) {\n            let totalOcorrencias, tempoTotal, tempoMedio, tempoMaximo;\n\n            if (estatisticas) {\n                totalOcorrencias = estatisticas.totalOcorrencias;\n                tempoTotal = estatisticas.tempoTotalSemPedidoMinutos;\n                tempoMedio = estatisticas.tempoMedioSemPedidoMinutos;\n                tempoMaximo = estatisticas.tempoMaximoSemPedidoMinutos;\n            } else {\n                totalOcorrencias = filteredData.length;\n                tempoTotal = filteredData.reduce((s, d) => s + (d.tempoSemPedidoMinutos || 0), 0);\n                tempoMedio = totalOcorrencias > 0 ? tempoTotal / totalOcorrencias : 0;\n                tempoMaximo = filteredData.reduce((m, d) => Math.max(m, d.tempoSemPedidoMinutos || 0), 0);\n            }\n\n            const kpisContainer = document.getElementById('kpis');\n            kpisContainer.innerHTML = `\n                <div class=\"kpi-card primary\">\n                    <div class=\"kpi-label\">üìä Ocorr√™ncias</div>\n                    <div class=\"kpi-value\">${totalOcorrencias}</div>\n                    <div class=\"kpi-subtitle\">Per√≠odos sem pedido</div>\n                </div>\n                <div class=\"kpi-card warning\">\n                    <div class=\"kpi-label\">üïí Tempo Total Sem Pedido</div>\n                    <div class=\"kpi-value\">${formatarTempo(tempoTotal)}</div>\n                    <div class=\"kpi-subtitle\">${tempoTotal.toFixed(1)} minutos</div>\n                </div>\n                <div class=\"kpi-card success\">\n                    <div class=\"kpi-label\">üìà M√©dia por Ocorr√™ncia</div>\n                    <div class=\"kpi-value\">${tempoMedio.toFixed(1)} min</div>\n                    <div class=\"kpi-subtitle\">Tempo m√©dio sem pedido</div>\n                </div>\n                <div class=\"kpi-card danger\">\n                    <div class=\"kpi-label\">‚è∞ M√°ximo Sem Pedido</div>\n                    <div class=\"kpi-value\">${tempoMaximo.toFixed(1)} min</div>\n                    <div class=\"kpi-subtitle\">Pior caso registrado</div>\n                </div>\n            `;\n        }\n\n        function switchTab(tabName) {\n            currentTab = tabName;\n            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));\n            event.target.classList.add('active');\n            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));\n            document.getElementById(`tab-${tabName}`).classList.add('active');\n            renderCurrentTab();\n        }\n\n        function renderCurrentTab() {\n            switch (currentTab) {\n                case 'detalhes':\n                    renderTableDetalhes();\n                    break;\n                case 'por-filial':\n                    renderGroupByFilial();\n                    break;\n                case 'por-motoboy':\n                    renderGroupByMotoboy();\n                    break;\n            }\n        }\n\n        function renderTableDetalhes() {\n            const tbody = document.getElementById('tableDetalhes');\n            if (filteredData.length === 0) {\n                tbody.innerHTML = '<tr><td colspan=\"6\" class=\"empty-state\"><div class=\"empty-state-icon\">üì≠</div><div class=\"empty-state-text\">Nenhum registro encontrado</div></td></tr>';\n                document.getElementById('pagination-detalhes').innerHTML = '';\n                return;\n            }\n\n            const start = (pagination.currentPage - 1) * pagination.itemsPerPage;\n            const end = start + pagination.itemsPerPage;\n            const paginatedData = filteredData.slice(start, end);\n\n            tbody.innerHTML = paginatedData.map(item => `\n                <tr>\n                    <td class=\"td-strong\">${item.filial || '-'}</td>\n                    <td class=\"td-strong\">${item.matricula || '-'}</td>\n                    <td class=\"td-muted\">${item.tempoDisponivel || '-'}</td>\n                    <td class=\"td-muted\">${item.fimPeriodo || '-'}</td>\n                    <td class=\"td-strong\" style=\"color: ${(item.tempoSemPedidoMinutos || 0) > 30 ? '#ef4444' : '#f59e0b'};\">\n                        ${item.tempoSemPedidoFormatado || '0m 0s'}\n                        <div style=\"font-size: 11px; color: #9ca3af;\">${(item.tempoSemPedidoMinutos || 0).toFixed(1)} min</div>\n                    </td>\n                    <td><span class=\"badge badge-info\">${item.motivoFim || '-'}</span></td>\n                </tr>\n            `).join('');\n\n            renderPagination();\n        }\n\n        function renderGroupByFilial() {\n            const container = document.getElementById('groupByFilial');\n            const grouped = {};\n\n            filteredData.forEach(item => {\n                const key = item.filial || 'Sem Filial';\n                if (!grouped[key]) {\n                    grouped[key] = { filial: key, ocorrencias: 0, tempoTotal: 0, motoboys: new Set() };\n                }\n                grouped[key].ocorrencias++;\n                grouped[key].tempoTotal += (item.tempoSemPedidoMinutos || 0);\n                grouped[key].motoboys.add(item.matricula);\n            });\n\n            const groups = Object.values(grouped).sort((a, b) => b.tempoTotal - a.tempoTotal);\n\n            if (groups.length === 0) {\n                container.innerHTML = '<div class=\"empty-state\"><div class=\"empty-state-icon\">üì≠</div><div class=\"empty-state-text\">Nenhuma filial encontrada</div></div>';\n                return;\n            }\n\n            container.innerHTML = groups.map(group => `\n                <div class=\"group-card\">\n                    <div class=\"group-card-header\">\n                        <div class=\"group-card-title\">üè¢ ${group.filial}</div>\n                        <div class=\"group-card-count\">${group.ocorrencias}</div>\n                    </div>\n                    <div class=\"group-card-body\">\n                        <div class=\"group-stat\">\n                            <span class=\"group-stat-label\">Ocorr√™ncias:</span>\n                            <span class=\"group-stat-value\">${group.ocorrencias}</span>\n                        </div>\n                        <div class=\"group-stat\">\n                            <span class=\"group-stat-label\">Motoboys impactados:</span>\n                            <span class=\"group-stat-value\">${group.motoboys.size}</span>\n                        </div>\n                        <div class=\"group-stat\">\n                            <span class=\"group-stat-label\">Tempo total sem pedido:</span>\n                            <span class=\"group-stat-value\" style=\"color: ${group.tempoTotal > 60 ? '#ef4444' : '#f59e0b'};\">\n                                ${formatarTempo(group.tempoTotal)}\n                            </span>\n                        </div>\n                        <div class=\"group-stat\">\n                            <span class=\"group-stat-label\">M√©dia por ocorr√™ncia:</span>\n                            <span class=\"group-stat-value\">${(group.tempoTotal / group.ocorrencias).toFixed(1)} min</span>\n                        </div>\n                    </div>\n                </div>\n            `).join('');\n        }\n\n        function renderGroupByMotoboy() {\n            const container = document.getElementById('groupByMotoboy');\n            const grouped = {};\n\n            filteredData.forEach(item => {\n                const key = item.matricula || 'Sem Matr√≠cula';\n                if (!grouped[key]) {\n                    grouped[key] = { matricula: key, filial: item.filial, ocorrencias: 0, tempoTotal: 0 };\n                }\n                grouped[key].ocorrencias++;\n                grouped[key].tempoTotal += (item.tempoSemPedidoMinutos || 0);\n            });\n\n            const groups = Object.values(grouped).sort((a, b) => b.tempoTotal - a.tempoTotal);\n\n            if (groups.length === 0) {\n                container.innerHTML = '<div class=\"empty-state\"><div class=\"empty-state-icon\">üì≠</div><div class=\"empty-state-text\">Nenhum motoboy encontrado</div></div>';\n                return;\n            }\n\n            container.innerHTML = groups.map(group => {\n                const media = group.tempoTotal / group.ocorrencias;\n                let nivel = 'Baixa ociosidade';\n                let cor = '#10b981';\n                if (media > 30) { nivel = 'Cr√≠tica'; cor = '#ef4444'; }\n                else if (media > 15) { nivel = 'Alta'; cor = '#f59e0b'; }\n\n                return `\n                    <div class=\"group-card\">\n                        <div class=\"group-card-header\">\n                            <div class=\"group-card-title\">üèçÔ∏è Motoboy ${group.matricula}</div>\n                            <div class=\"group-card-count\">${group.ocorrencias}</div>\n                        </div>\n                        <div class=\"group-card-body\">\n                            <div class=\"group-stat\">\n                                <span class=\"group-stat-label\">Filial:</span>\n                                <span class=\"group-stat-value\">${group.filial || '-'}</span>\n                            </div>\n                            <div class=\"group-stat\">\n                                <span class=\"group-stat-label\">Ocorr√™ncias:</span>\n                                <span class=\"group-stat-value\">${group.ocorrencias}</span>\n                            </div>\n                            <div class=\"group-stat\">\n                                <span class=\"group-stat-label\">Tempo total sem pedido:</span>\n                                <span class=\"group-stat-value\" style=\"color: ${group.tempoTotal > 60 ? '#ef4444' : '#f59e0b'};\">\n                                    ${formatarTempo(group.tempoTotal)}\n                                </span>\n                            </div>\n                            <div class=\"group-stat\">\n                                <span class=\"group-stat-label\">M√©dia por ocorr√™ncia:</span>\n                                <span class=\"group-stat-value\">${media.toFixed(1)} min</span>\n                            </div>\n                            <div class=\"group-stat\">\n                                <span class=\"group-stat-label\">N√≠vel de ociosidade:</span>\n                                <span class=\"group-stat-value\" style=\"color: ${cor}; font-weight: 700;\">${nivel}</span>\n                            </div>\n                        </div>\n                    </div>\n                `;\n            }).join('');\n        }\n\n        function renderPagination() {\n            const container = document.getElementById('pagination-detalhes');\n            const totalPages = Math.ceil(filteredData.length / pagination.itemsPerPage);\n            if (totalPages <= 1) { container.innerHTML = ''; return; }\n\n            const start = (pagination.currentPage - 1) * pagination.itemsPerPage + 1;\n            const end = Math.min(start + pagination.itemsPerPage - 1, filteredData.length);\n\n            let html = `\n                <button onclick=\"changePage(${pagination.currentPage - 1})\" ${pagination.currentPage === 1 ? 'disabled' : ''}>‚Üê Anterior</button>\n            `;\n\n            for (let i = 1; i <= totalPages; i++) {\n                if (i === 1 || i === totalPages || (i >= pagination.currentPage - 2 && i <= pagination.currentPage + 2)) {\n                    html += `\n                        <button onclick=\"changePage(${i})\" class=\"${i === pagination.currentPage ? 'active' : ''}\">${i}</button>\n                    `;\n                } else if (i === pagination.currentPage - 3 || i === pagination.currentPage + 3) {\n                    html += '<span style=\"padding: 0 8px;\">...</span>';\n                }\n            }\n\n            html += `\n                <button onclick=\"changePage(${pagination.currentPage + 1})\" ${pagination.currentPage === totalPages ? 'disabled' : ''}>Pr√≥xima ‚Üí</button>\n                <span class=\"pagination-info\">${start}-${end} de ${filteredData.length}</span>\n            `;\n\n            container.innerHTML = html;\n        }\n\n        function changePage(page) {\n            const totalPages = Math.ceil(filteredData.length / pagination.itemsPerPage);\n            if (page < 1 || page > totalPages) return;\n            pagination.currentPage = page;\n            renderTableDetalhes();\n        }\n\n        function formatarTempo(minutos) {\n            if (!minutos || minutos < 0) return '0m 0s';\n            const horas = Math.floor(minutos / 60);\n            const mins = Math.floor(minutos % 60);\n            const segs = Math.floor((minutos % 1) * 60);\n            if (horas > 0) { return `${horas}h ${mins}m`; }\n            return `${mins}m ${segs}s`;\n        }\n\n        function showEmptyState() {\n            document.getElementById('kpis').innerHTML = `\n                <div class=\"empty-state\" style=\"grid-column: 1/-1; padding: 40px;\">\n                    <div class=\"empty-state-icon\">‚ö†Ô∏è</div>\n                    <div class=\"empty-state-text\">Nenhum dado dispon√≠vel</div>\n                    <p style=\"color: #9ca3af; font-size: 13px; margin-top: 12px;\">\n                        Verifique se a fun√ß√£o <code>tempo_ocioso.calcular()</code> est√° retornando dados.\n                    </p>\n                </div>\n            `;\n            document.getElementById('tableDetalhes').innerHTML = '<tr><td colspan=\"6\" class=\"empty-state\"><div class=\"empty-state-icon\">üì≠</div><div class=\"empty-state-text\">Aguardando dados do Appsmith...</div></td></tr>';\n        }\n\n        function inicializarDashboard() {\n            console.log('üöÄ Inicializando Dashboard de Motoboys Sem Pedido...');\n            try {\n                if (typeof window.dadosTempoOcioso !== 'undefined') {\n                    loadDataFromAppsmith(window.dadosTempoOcioso);\n                } else {\n                    console.warn('‚ö†Ô∏è Aguardando dados do Appsmith para tempo_ocioso...');\n                    showEmptyState();\n                }\n            } catch (error) {\n                console.error('‚ùå Erro na inicializa√ß√£o tempo_ocioso:', error);\n                showEmptyState();\n            }\n        }\n\n        if (document.readyState === 'loading') {\n            document.addEventListener('DOMContentLoaded', inicializarDashboard);\n        } else {\n            inicializarDashboard();\n        }\n    </script>\n\n    <script>\n        try {\n            console.log('üîÑ Tentando carregar dados de tempo_ocioso do Appsmith...');\n\n            {{\n                (() => {\n                    const dados = tempo_ocioso.calcular();\n                    return `window.dadosTempoOcioso = ${JSON.stringify(dados)};`;\n                })()\n            }}\n\n            console.log('üìä Dados de tempo_ocioso recebidos!');\n            if (typeof loadDataFromAppsmith !== 'undefined') {\n                loadDataFromAppsmith(window.dadosTempoOcioso);\n            }\n        } catch (error) {\n            console.error('‚ùå Erro ao carregar dados de tempo_ocioso:', error);\n            window.dadosTempoOcioso = { detalhes: [] };\n        }\n    </script>\n</body>\n</html>\n",
  "topRow": 6,
  "type": "IFRAME_WIDGET",
  "version": 1,
  "widgetId": "3x9znoy0hr",
  "widgetName": "Iframe14Copy1"
}