{
  "animateLoading": true,
  "borderOpacity": 100,
  "borderRadius": "{{appsmith.theme.borderRadius.appBorderRadius}}",
  "borderWidth": 1,
  "bottomRow": 134,
  "boxShadow": "{{appsmith.theme.boxShadow.appBoxShadow}}",
  "dynamicBindingPathList": [
    {
      "key": "borderRadius"
    },
    {
      "key": "boxShadow"
    },
    {
      "key": "srcDoc"
    }
  ],
  "dynamicTriggerPathList": [],
  "flexVerticalAlignment": "start",
  "isLoading": false,
  "isVisible": true,
  "key": "wh6z4zxt20",
  "leftColumn": 0,
  "mobileBottomRow": 32,
  "mobileLeftColumn": 0,
  "mobileRightColumn": 24,
  "mobileTopRow": 0,
  "needsErrorInfo": false,
  "parentColumnSpace": 19.9375,
  "parentId": "yrur3vn68g",
  "parentRowSpace": 10,
  "renderMode": "CANVAS",
  "responsiveBehavior": "fill",
  "rightColumn": 63,
  "source": "https://www.example.com",
  "srcDoc": "<style>\n    * {\n        margin: 0;\n        padding: 0;\n        box-sizing: border-box;\n    }\n\n    body {\n        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;\n        background: linear-gradient(135deg, #1890ff 0%, #0050b3 100%);\n        min-height: 100vh;\n        padding: 20px;\n    }\n\n    .analysis-container {\n        max-width: 1800px;\n        margin: 0 auto;\n    }\n\n    /* ========== HEADER & SEARCH ========== */\n    .search-header {\n        background: white;\n        padding: 32px;\n        border-radius: 16px;\n        box-shadow: 0 8px 32px rgba(0,0,0,0.12);\n        margin-bottom: 24px;\n    }\n\n    .search-header h1 {\n        font-size: 32px;\n        font-weight: 900;\n        background: linear-gradient(135deg, #1890ff 0%, #0050b3 100%);\n        -webkit-background-clip: text;\n        -webkit-text-fill-color: transparent;\n        background-clip: text;\n        margin-bottom: 24px;\n        display: flex;\n        align-items: center;\n        gap: 12px;\n    }\n\n    .search-box {\n        display: flex;\n        gap: 12px;\n        margin-bottom: 20px;\n    }\n\n    .search-input {\n        flex: 1;\n        padding: 16px 20px;\n        border: 3px solid #1890ff;\n        border-radius: 12px;\n        font-size: 18px;\n        font-weight: 600;\n        color: #111827;\n        transition: all 0.2s;\n        text-transform: uppercase;\n    }\n\n    .search-input:focus {\n        outline: none;\n        border-color: #0050b3;\n        box-shadow: 0 0 0 4px rgba(24, 144, 255, 0.1);\n    }\n\n    .search-btn {\n        padding: 16px 32px;\n        background: linear-gradient(135deg, #1890ff 0%, #0050b3 100%);\n        color: white;\n        border: none;\n        border-radius: 12px;\n        font-size: 16px;\n        font-weight: 700;\n        cursor: pointer;\n        transition: all 0.2s;\n        display: flex;\n        align-items: center;\n        gap: 8px;\n        box-shadow: 0 4px 12px rgba(24, 144, 255, 0.3);\n    }\n\n    .search-btn:hover {\n        transform: translateY(-2px);\n        box-shadow: 0 6px 20px rgba(24, 144, 255, 0.4);\n    }\n\n    .search-suggestions {\n        display: flex;\n        gap: 8px;\n        flex-wrap: wrap;\n        margin-top: 12px;\n    }\n\n    .suggestion-chip {\n        padding: 8px 16px;\n        background: #e6f7ff;\n        border: 2px solid #1890ff;\n        border-radius: 999px;\n        font-size: 12px;\n        font-weight: 600;\n        color: #0050b3;\n        cursor: pointer;\n        transition: all 0.2s;\n    }\n\n    .suggestion-chip:hover {\n        background: #1890ff;\n        color: white;\n    }\n\n    /* ========== RESULTS SECTION ========== */\n    .results-section {\n        display: none;\n    }\n\n    .results-section.active {\n        display: block;\n    }\n\n    /* ========== MOTOBOY HEADER ========== */\n    .motoboy-header {\n        background: white;\n        padding: 32px;\n        border-radius: 16px;\n        box-shadow: 0 8px 32px rgba(0,0,0,0.12);\n        margin-bottom: 24px;\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n    }\n\n    .motoboy-info {\n        flex: 1;\n    }\n\n    .motoboy-name {\n        font-size: 42px;\n        font-weight: 900;\n        color: #1890ff;\n        margin-bottom: 8px;\n    }\n\n    .motoboy-subtitle {\n        font-size: 16px;\n        color: #6b7280;\n        font-weight: 600;\n    }\n\n    .motoboy-score {\n        text-align: center;\n        padding: 24px;\n        background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);\n        border-radius: 16px;\n        border: 3px solid;\n        min-width: 200px;\n    }\n\n    .motoboy-score.excellent {\n        border-color: #10b981;\n        background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%);\n    }\n\n    .motoboy-score.good {\n        border-color: #3b82f6;\n        background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);\n    }\n\n    .motoboy-score.average {\n        border-color: #f59e0b;\n        background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);\n    }\n\n    .motoboy-score.poor {\n        border-color: #ef4444;\n        background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%);\n    }\n\n    .score-label {\n        font-size: 13px;\n        font-weight: 700;\n        text-transform: uppercase;\n        letter-spacing: 0.5px;\n        color: #6b7280;\n        margin-bottom: 8px;\n    }\n\n    .score-value {\n        font-size: 56px;\n        font-weight: 900;\n        line-height: 1;\n        margin-bottom: 8px;\n    }\n\n    .score-text {\n        font-size: 14px;\n        font-weight: 700;\n        text-transform: uppercase;\n    }\n\n    /* ========== STATS GRID ========== */\n    .stats-grid {\n        display: grid;\n        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n        gap: 16px;\n        margin-bottom: 24px;\n    }\n\n    .stat-card {\n        background: white;\n        padding: 24px;\n        border-radius: 16px;\n        box-shadow: 0 4px 16px rgba(0,0,0,0.08);\n        border-left: 4px solid;\n        transition: all 0.2s;\n    }\n\n    .stat-card:hover {\n        transform: translateY(-2px);\n        box-shadow: 0 8px 24px rgba(0,0,0,0.12);\n    }\n\n    .stat-card.blue { border-color: #1890ff; }\n    .stat-card.green { border-color: #52c41a; }\n    .stat-card.orange { border-color: #faad14; }\n    .stat-card.cyan { border-color: #13c2c2; }\n    .stat-card.purple { border-color: #722ed1; }\n    .stat-card.red { border-color: #f5222d; }\n\n    .stat-label {\n        font-size: 11px;\n        font-weight: 700;\n        text-transform: uppercase;\n        color: #6b7280;\n        letter-spacing: 0.5px;\n        margin-bottom: 8px;\n    }\n\n    .stat-value {\n        font-size: 32px;\n        font-weight: 900;\n        color: #111827;\n        line-height: 1;\n        margin-bottom: 4px;\n    }\n\n    .stat-subtitle {\n        font-size: 12px;\n        color: #9ca3af;\n        font-weight: 600;\n    }\n\n    .stat-trend {\n        font-size: 12px;\n        font-weight: 700;\n        margin-top: 8px;\n        padding: 4px 8px;\n        border-radius: 6px;\n        display: inline-block;\n    }\n\n    .stat-trend.up {\n        background: #d1fae5;\n        color: #065f46;\n    }\n\n    .stat-trend.down {\n        background: #fee2e2;\n        color: #991b1b;\n    }\n\n    .stat-trend.neutral {\n        background: #f3f4f6;\n        color: #6b7280;\n    }\n\n    /* ========== PERFORMANCE ANALYSIS ========== */\n    .performance-section {\n        display: grid;\n        grid-template-columns: 1fr 1fr;\n        gap: 24px;\n        margin-bottom: 24px;\n    }\n\n    .performance-card {\n        background: white;\n        padding: 24px 32px;\n        border-radius: 16px;\n        box-shadow: 0 4px 16px rgba(0,0,0,0.08);\n    }\n\n    .performance-title {\n        font-size: 18px;\n        font-weight: 800;\n        color: #374151;\n        margin-bottom: 20px;\n        display: flex;\n        align-items: center;\n        gap: 8px;\n    }\n\n    .strength-item, .weakness-item {\n        padding: 12px 16px;\n        border-radius: 10px;\n        margin-bottom: 10px;\n        display: flex;\n        align-items: center;\n        gap: 12px;\n        font-size: 14px;\n        font-weight: 600;\n    }\n\n    .strength-item {\n        background: #d1fae5;\n        color: #065f46;\n        border-left: 4px solid #10b981;\n    }\n\n    .weakness-item {\n        background: #fee2e2;\n        color: #991b1b;\n        border-left: 4px solid #ef4444;\n    }\n\n    .item-icon {\n        font-size: 20px;\n    }\n\n    /* ========== INSIGHTS ========== */\n    .insights-section {\n        background: white;\n        padding: 24px 32px;\n        border-radius: 16px;\n        box-shadow: 0 4px 16px rgba(0,0,0,0.08);\n        margin-bottom: 24px;\n    }\n\n    .insights-title {\n        font-size: 18px;\n        font-weight: 800;\n        color: #374151;\n        margin-bottom: 16px;\n        display: flex;\n        align-items: center;\n        gap: 8px;\n    }\n\n    .insights-grid {\n        display: grid;\n        gap: 12px;\n    }\n\n    .insight-card {\n        padding: 16px 20px;\n        border-radius: 12px;\n        border-left: 4px solid;\n        display: flex;\n        align-items: flex-start;\n        gap: 12px;\n    }\n\n    .insight-card.critical {\n        background: #fef2f2;\n        border-color: #ef4444;\n    }\n\n    .insight-card.warning {\n        background: #fffbeb;\n        border-color: #f59e0b;\n    }\n\n    .insight-card.info {\n        background: #eff6ff;\n        border-color: #3b82f6;\n    }\n\n    .insight-card.success {\n        background: #f0fdf4;\n        border-color: #10b981;\n    }\n\n    .insight-icon {\n        font-size: 24px;\n        line-height: 1;\n    }\n\n    .insight-content strong {\n        display: block;\n        font-size: 14px;\n        font-weight: 700;\n        margin-bottom: 4px;\n        color: #111827;\n    }\n\n    .insight-content span {\n        font-size: 13px;\n        color: #6b7280;\n    }\n\n    /* ========== COMPARISON ========== */\n    .comparison-section {\n        background: white;\n        padding: 24px 32px;\n        border-radius: 16px;\n        box-shadow: 0 4px 16px rgba(0,0,0,0.08);\n        margin-bottom: 24px;\n    }\n\n    .comparison-title {\n        font-size: 18px;\n        font-weight: 800;\n        color: #374151;\n        margin-bottom: 20px;\n        display: flex;\n        align-items: center;\n        gap: 8px;\n    }\n\n    .comparison-item {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        padding: 16px 0;\n        border-bottom: 1px solid #f3f4f6;\n    }\n\n    .comparison-item:last-child {\n        border-bottom: none;\n    }\n\n    .comparison-label {\n        font-size: 14px;\n        font-weight: 600;\n        color: #374151;\n        flex: 1;\n    }\n\n    .comparison-values {\n        display: flex;\n        align-items: center;\n        gap: 20px;\n    }\n\n    .comparison-value {\n        text-align: center;\n    }\n\n    .comparison-value-label {\n        font-size: 10px;\n        font-weight: 700;\n        text-transform: uppercase;\n        color: #9ca3af;\n        margin-bottom: 4px;\n    }\n\n    .comparison-value-number {\n        font-size: 20px;\n        font-weight: 900;\n        color: #111827;\n    }\n\n    .comparison-bar {\n        width: 200px;\n        height: 8px;\n        background: #f3f4f6;\n        border-radius: 999px;\n        overflow: hidden;\n        position: relative;\n    }\n\n    .comparison-bar-fill {\n        height: 100%;\n        background: linear-gradient(90deg, #1890ff, #52c41a);\n        border-radius: 999px;\n        transition: width 0.3s;\n    }\n\n    /* ========== ROUTES TABLE ========== */\n    .routes-section {\n        background: white;\n        padding: 24px 32px;\n        border-radius: 16px;\n        box-shadow: 0 4px 16px rgba(0,0,0,0.08);\n        margin-bottom: 24px;\n    }\n\n    .routes-title {\n        font-size: 18px;\n        font-weight: 800;\n        color: #374151;\n        margin-bottom: 20px;\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n    }\n\n    table {\n        width: 100%;\n        border-collapse: collapse;\n        font-size: 13px;\n    }\n\n    thead {\n        background: linear-gradient(135deg, #1890ff 0%, #0050b3 100%);\n    }\n\n    th {\n        padding: 14px 16px;\n        text-align: left;\n        font-weight: 700;\n        font-size: 11px;\n        color: white;\n        text-transform: uppercase;\n        letter-spacing: 0.5px;\n    }\n\n    tbody tr {\n        border-bottom: 1px solid #f3f4f6;\n        transition: all 0.2s;\n    }\n\n    tbody tr:hover {\n        background: #f9fafb;\n    }\n\n    td {\n        padding: 14px 16px;\n        color: #374151;\n    }\n\n    .td-strong {\n        font-weight: 700;\n        color: #111827;\n    }\n\n    .td-muted {\n        color: #9ca3af;\n        font-size: 12px;\n    }\n\n    .badge {\n        display: inline-block;\n        padding: 4px 10px;\n        border-radius: 999px;\n        font-size: 10px;\n        font-weight: 700;\n        letter-spacing: 0.3px;\n        text-transform: uppercase;\n    }\n\n    .badge-success {\n        background: #d1fae5;\n        color: #065f46;\n        border: 1px solid #a7f3d0;\n    }\n\n    .badge-warning {\n        background: #fef3c7;\n        color: #92400e;\n        border: 1px solid #fde68a;\n    }\n\n    .badge-danger {\n        background: #fee2e2;\n        color: #991b1b;\n        border: 1px solid #fecaca;\n    }\n\n    /* ========== RESPONSIVE ========== */\n    @media (max-width: 1024px) {\n        .performance-section {\n            grid-template-columns: 1fr;\n        }\n\n        .comparison-bar {\n            width: 120px;\n        }\n    }\n\n    @media (max-width: 768px) {\n        .search-box {\n            flex-direction: column;\n        }\n\n        .stats-grid {\n            grid-template-columns: 1fr 1fr;\n        }\n\n        .motoboy-header {\n            flex-direction: column;\n            align-items: flex-start;\n            gap: 20px;\n        }\n\n        table {\n            font-size: 11px;\n        }\n\n        th, td {\n            padding: 10px 8px;\n        }\n    }\n\n    /* ========== EMPTY STATE ========== */\n    .empty-state {\n        text-align: center;\n        padding: 80px 20px;\n        color: #9ca3af;\n    }\n\n    .empty-icon {\n        font-size: 64px;\n        margin-bottom: 16px;\n    }\n\n    .empty-title {\n        font-size: 24px;\n        font-weight: 700;\n        color: #6b7280;\n        margin-bottom: 8px;\n    }\n\n    .empty-text {\n        font-size: 14px;\n        color: #9ca3af;\n    }\n</style>\n\n<div class=\"analysis-container\">\n    <!-- HEADER & SEARCH -->\n    <div class=\"search-header\">\n        <h1>üèçÔ∏è An√°lise Detalhada de Motoboy</h1>\n        \n        <div class=\"search-box\">\n            <input \n                type=\"text\" \n                id=\"searchInput\" \n                class=\"search-input\" \n                placeholder=\"Digite o nome do motoboy...\"\n                onkeypress=\"if(event.key === 'Enter') searchMotoboy()\"\n            >\n            <button class=\"search-btn\" onclick=\"searchMotoboy()\">\n                üîç Analisar Motoboy\n            </button>\n            <button class=\"search-btn\" onclick=\"showAllMotoboys()\" style=\"background: #52c41a;\">\n                üìã Ver Todos\n            </button>\n        </div>\n\n        <div class=\"search-suggestions\" id=\"suggestions\">\n            <!-- Preenchido dinamicamente -->\n        </div>\n        \n        <div id=\"dataStatus\" style=\"margin-top: 12px; font-size: 13px; color: #6b7280; font-weight: 600;\">\n            Carregando dados...\n        </div>\n    </div>\n\n    <!-- EMPTY STATE -->\n    <div id=\"emptyState\" class=\"search-header\">\n        <div class=\"empty-state\">\n            <div class=\"empty-icon\">üèçÔ∏è</div>\n            <div class=\"empty-title\">Digite o nome de um motoboy para come√ßar</div>\n            <div class=\"empty-text\">Veja an√°lise completa de performance, pontos fortes e fracos</div>\n        </div>\n    </div>\n\n    <!-- RESULTS SECTION -->\n    <div id=\"resultsSection\" class=\"results-section\">\n        <!-- Preenchido dinamicamente -->\n    </div>\n</div>\n\n<script>\n    // ========================================\n    // DADOS GLOBAIS\n    // ========================================\n    let allData = {\n        pedidos: [],\n        calculo: [],\n        rotas: [],\n        allMotoboys: [],\n        mediaGeral: {}\n    };\n\n    // ========================================\n    // INICIALIZAR\n    // ========================================\n    function initAnalysis() {\n        console.log('üèçÔ∏è Inicializando an√°lise de motoboys...');\n        calculateGeneralAverage();\n        loadSuggestions();\n    }\n\n    // ========================================\n    // CALCULAR M√âDIA GERAL\n    // ========================================\n    function calculateGeneralAverage() {\n        const pedidos = allData.pedidos;\n        if (pedidos.length === 0) return;\n\n        const calc = allData.calculo;\n        const rotas = allData.rotas;\n\n        // Agrupar por motoboy\n        const motoboyStats = {};\n        const saidasProcessadas = {};\n\n        // Processar por SAIDAID primeiro\n        const groupedBySaida = {};\n        pedidos.forEach(p => {\n            const saidaId = p.SAIDAID;\n            if (!groupedBySaida[saidaId]) {\n                groupedBySaida[saidaId] = {\n                    SAIDAID: saidaId,\n                    MOTOBOY: p.MOTOBOY,\n                    CIDADEFILIAL: p.CIDADEFILIAL,\n                    items: [],\n                    clientesUnicos: new Set()\n                };\n            }\n            groupedBySaida[saidaId].items.push(p);\n            if (p.COD_CLI) {\n                groupedBySaida[saidaId].clientesUnicos.add(p.COD_CLI);\n            }\n        });\n\n        // Processar cada SAIDAID\n        Object.values(groupedBySaida).forEach(rota => {\n            const mb = (rota.MOTOBOY || 'SEM NOME').trim().toUpperCase();\n            \n            if (!motoboyStats[mb]) {\n                motoboyStats[mb] = {\n                    rotas: 0,\n                    entregas: 0,\n                    entregues: 0,\n                    km: 0,\n                    tempos: [],\n                    atrasos: 0\n                };\n            }\n\n            // Calcular KM e tempo\n            let kmRota = 0;\n            let tempoPrevisto = 0;\n            \n            // NOVA L√ìGICA CORRETA: Google Maps + 5min\n            rota.items.forEach(item => {\n                const log = calc.find(l => l.PEDIDO === item.PEDIDO || l.SAIDAID === parseInt(item.SAIDAID));\n                if (log) {\n                    kmRota += parseFloat(log?.KM || 0);\n                    // Extrair n√∫mero e adicionar 5 minutos\n                    const tempoGoogle = Number((log.TEMPO || \"0\").toString().replace(/\\D+/g, ''));\n                    tempoPrevisto += (tempoGoogle + 5) * 60; // +5min e converter para segundos\n                }\n            });\n\n            // Tempo real: MAX(ENTREGA_CLIENTE) - MIN(INICIO_ROTA) SEM DESCONTOS\n            const datasEntrega = rota.items\n                .map(item => item.ENTREGA_CLIENTE)\n                .filter(d => d && d !== 'null')\n                .map(d => new Date(d));\n            const datasInicio = rota.items\n                .map(item => item.INICIO_ROTA)\n                .filter(d => d && d !== 'null')\n                .map(d => new Date(d));\n\n            let tempoReal = 0;\n            if (datasEntrega.length > 0 && datasInicio.length > 0) {\n                const ultimaEntrega = new Date(Math.max(...datasEntrega));\n                const primeiraSaida = new Date(Math.min(...datasInicio));\n                tempoReal = Math.floor((ultimaEntrega - primeiraSaida) / 1000);\n            }\n\n            const ratio = tempoPrevisto > 0 && tempoReal > 0 ? tempoReal / tempoPrevisto : null;\n\n            motoboyStats[mb].rotas++;\n            motoboyStats[mb].entregas += rota.items.length;\n            motoboyStats[mb].entregues += rota.items.filter(i => i.ENTREGA_CLIENTE && i.ENTREGA_CLIENTE !== 'null').length;\n            motoboyStats[mb].km += kmRota;\n            if (tempoReal > 0) {\n                motoboyStats[mb].tempos.push(tempoReal);\n            }\n            if (ratio && ratio > 1.05) {\n                motoboyStats[mb].atrasos++;\n            }\n        });\n\n        // Calcular m√©dias gerais\n        const allMotoboys = Object.values(motoboyStats);\n        const totalRotas = allMotoboys.reduce((sum, m) => sum + m.rotas, 0);\n        const totalEntregas = allMotoboys.reduce((sum, m) => sum + m.entregas, 0);\n        const totalEntregues = allMotoboys.reduce((sum, m) => sum + m.entregues, 0);\n        const totalKm = allMotoboys.reduce((sum, m) => sum + m.km, 0);\n        const allTempos = allMotoboys.flatMap(m => m.tempos);\n        const tempoMedioGeral = allTempos.length > 0 ? allTempos.reduce((a,b) => a+b, 0) / allTempos.length : 0;\n\n        allData.mediaGeral = {\n            rotasPorMotoboy: totalRotas / allMotoboys.length,\n            entregasPorMotoboy: totalEntregas / allMotoboys.length,\n            taxaSucessoGeral: totalEntregas > 0 ? totalEntregues / totalEntregas : 0,\n            kmPorMotoboy: totalKm / allMotoboys.length,\n            tempoMedio: tempoMedioGeral\n        };\n\n        console.log('üìä M√©dia geral calculada:', allData.mediaGeral);\n    }\n\n    // ========================================\n    // CARREGAR SUGEST√ïES\n    // ========================================\n    function loadSuggestions() {\n        const pedidos = allData.pedidos;\n        const motoboys = [...new Set(pedidos.map(p => (p.MOTOBOY || '').trim()).filter(m => m))].sort();\n        allData.allMotoboys = motoboys;\n\n        console.log('üèçÔ∏è Total de motoboys:', motoboys.length);\n        console.log('üìã Motoboys dispon√≠veis:', motoboys.slice(0, 10));\n\n        const container = document.getElementById('suggestions');\n        const statusDiv = document.getElementById('dataStatus');\n\n        if (pedidos.length === 0) {\n            statusDiv.innerHTML = '‚ö†Ô∏è Aguardando dados do Appsmith...';\n            statusDiv.style.color = '#f59e0b';\n            container.innerHTML = '';\n            return;\n        }\n\n        statusDiv.innerHTML = `‚úÖ ${pedidos.length} pedidos carregados | ${motoboys.length} motoboys dispon√≠veis`;\n        statusDiv.style.color = '#10b981';\n\n        if (motoboys.length > 0) {\n            const topMotoboys = motoboys.slice(0, 10);\n            container.innerHTML = `\n                <span style=\"font-size: 12px; color: #6b7280; font-weight: 600;\">Motoboys dispon√≠veis (${motoboys.length}):</span>\n                ${topMotoboys.map(m => `\n                    <span class=\"suggestion-chip\" onclick=\"quickSearch('${m.replace(/'/g, \"\\\\'\")}')\">${m}</span>\n                `).join('')}\n            `;\n        }\n    }\n\n    // ========================================\n    // MOSTRAR TODOS OS MOTOBOYS\n    // ========================================\n    function showAllMotoboys() {\n        const motoboys = allData.allMotoboys;\n        \n        if (motoboys.length === 0) {\n            alert('Nenhum motoboy dispon√≠vel. Aguarde o carregamento dos dados.');\n            return;\n        }\n\n        let mensagem = `üèçÔ∏è Total de ${motoboys.length} motoboys dispon√≠veis:\\n\\n`;\n        mensagem += motoboys.slice(0, 50).join('\\n');\n        \n        if (motoboys.length > 50) {\n            mensagem += `\\n\\n... e mais ${motoboys.length - 50} motoboys`;\n        }\n        \n        mensagem += '\\n\\nClique em qualquer chip para buscar!';\n        \n        alert(mensagem);\n        console.log('üìã TODOS OS MOTOBOYS:', motoboys);\n    }\n\n    // ========================================\n    // BUSCA R√ÅPIDA\n    // ========================================\n    function quickSearch(motoboy) {\n        document.getElementById('searchInput').value = motoboy;\n        searchMotoboy();\n    }\n\n    // ========================================\n    // BUSCAR MOTOBOY\n    // ========================================\n    function searchMotoboy() {\n        const inputValue = document.getElementById('searchInput').value.trim().toUpperCase();\n        \n        if (!inputValue) {\n            alert('Por favor, digite o nome de um motoboy!');\n            return;\n        }\n\n        console.log('üîç Buscando motoboy:', inputValue);\n\n        // Filtrar pedidos do motoboy\n        const pedidosDoMotoboy = allData.pedidos.filter(p => {\n            const motoboyName = (p.MOTOBOY || '').trim().toUpperCase();\n            return motoboyName === inputValue || motoboyName.includes(inputValue);\n        });\n\n        console.log('‚úÖ Pedidos encontrados:', pedidosDoMotoboy.length);\n\n        if (pedidosDoMotoboy.length === 0) {\n            alert(`‚ùå Nenhum dado encontrado para o motoboy: ${inputValue}\\n\\n` +\n                  `Total de motoboys dispon√≠veis: ${allData.allMotoboys.length}\\n\\n` +\n                  `Clique em \"üìã Ver Todos\" para ver a lista completa.`);\n            return;\n        }\n\n        // Processar e exibir\n        processMotoboy(inputValue, pedidosDoMotoboy);\n    }\n\n    // ========================================\n    // PROCESSAR MOTOBOY\n    // ========================================\n    function processMotoboy(motoboyName, pedidos) {\n        const calc = allData.calculo;\n        const rotas = allData.rotas;\n\n        // Agrupar por SAIDAID\n        const groupedBySaida = {};\n        pedidos.forEach(p => {\n            const saidaId = p.SAIDAID;\n            if (!groupedBySaida[saidaId]) {\n                groupedBySaida[saidaId] = {\n                    SAIDAID: saidaId,\n                    CIDADEFILIAL: p.CIDADEFILIAL,\n                    items: [],\n                    clientesUnicos: new Set()\n                };\n            }\n            groupedBySaida[saidaId].items.push(p);\n            if (p.COD_CLI) {\n                groupedBySaida[saidaId].clientesUnicos.add(p.COD_CLI);\n            }\n        });\n\n        // Processar cada rota\n        const rotasProcessadas = Object.values(groupedBySaida).map(rota => {\n            // KM e TEMPO PREVISTO\n            let kmRota = 0;\n            let tempoPrevisto = 0;\n            \n            rota.items.forEach(item => {\n                const log = calc.find(l => l.PEDIDO === item.PEDIDO || l.SAIDAID === parseInt(item.SAIDAID));\n                if (log) {\n                    kmRota += parseFloat(log?.KM || 0);\n                    // TEMPO PREVISTO: Google Maps + 5min\n                    const tempoGoogle = Number((log.TEMPO || \"0\").toString().replace(/\\D+/g, ''));\n                    tempoPrevisto += (tempoGoogle + 5) * 60; // +5min e converter para segundos\n                }\n            });\n\n            // TEMPO REAL: MAX(ENTREGA_CLIENTE) - MIN(INICIO_ROTA) SEM DESCONTOS\n            const datasEntrega = rota.items\n                .map(item => item.ENTREGA_CLIENTE)\n                .filter(d => d && d !== 'null')\n                .map(d => new Date(d));\n            const datasInicio = rota.items\n                .map(item => item.INICIO_ROTA)\n                .filter(d => d && d !== 'null')\n                .map(d => new Date(d));\n\n            let tempoReal = 0;\n            let inicioRota = null;\n            \n            if (datasEntrega.length > 0 && datasInicio.length > 0) {\n                inicioRota = new Date(Math.min(...datasInicio));\n                const ultimaEntrega = new Date(Math.max(...datasEntrega));\n                tempoReal = Math.floor((ultimaEntrega - inicioRota) / 1000);\n            }\n\n            const entregues = rota.items.filter(i => i.ENTREGA_CLIENTE && i.ENTREGA_CLIENTE !== 'null').length;\n            const ratio = tempoPrevisto > 0 && tempoReal > 0 ? tempoReal / tempoPrevisto : null;\n\n            return {\n                ...rota,\n                kmTotal: kmRota,\n                tempoPrevisto,\n                tempoReal,\n                inicioRota,\n                entregues,\n                ratio\n            };\n        });\n\n        // Calcular estat√≠sticas\n        const stats = {\n            totalRotas: rotasProcessadas.length,\n            totalEntregas: pedidos.length,\n            totalEntregues: rotasProcessadas.reduce((sum, r) => sum + r.entregues, 0),\n            totalKm: rotasProcessadas.reduce((sum, r) => sum + r.kmTotal, 0),\n            tempos: rotasProcessadas.filter(r => r.tempoReal > 0).map(r => r.tempoReal),\n            atrasos: rotasProcessadas.filter(r => r.ratio && r.ratio > 1.05).length,\n            rotasComDados: rotasProcessadas.filter(r => r.ratio !== null).length,\n            dentroPrazo: rotasProcessadas.filter(r => r.ratio !== null && r.ratio <= 1.05).length\n        };\n\n        stats.taxaSucesso = stats.totalEntregas > 0 ? stats.totalEntregues / stats.totalEntregas : 0;\n        stats.tempoMedio = stats.tempos.length > 0 ? stats.tempos.reduce((a,b) => a+b, 0) / stats.tempos.length : 0;\n        stats.performance = stats.rotasComDados > 0 ? stats.dentroPrazo / stats.rotasComDados : 0;\n        stats.kmPorEntrega = stats.totalEntregas > 0 ? stats.totalKm / stats.totalEntregas : 0;\n\n        // Renderizar\n        renderResults(motoboyName, stats, rotasProcessadas);\n    }\n\n    // ========================================\n    // RENDERIZAR RESULTADOS (continua...)\n    // ========================================\n    function renderResults(motoboyName, stats, rotas) {\n        document.getElementById('emptyState').style.display = 'none';\n        const section = document.getElementById('resultsSection');\n        section.classList.add('active');\n\n        // Calcular pontua√ß√£o (0-100)\n        let score = 0;\n        score += stats.taxaSucesso * 30; // 30 pontos para taxa de sucesso\n        score += stats.performance * 40; // 40 pontos para performance de tempo\n        score += Math.min((stats.totalRotas / 10) * 15, 15); // 15 pontos para experi√™ncia\n        score += Math.min((1 - (stats.atrasos / stats.totalRotas)) * 15, 15); // 15 pontos por baixo n√∫mero de atrasos\n\n        let scoreClass = 'poor';\n        let scoreText = 'PRECISA MELHORAR';\n        if (score >= 85) {\n            scoreClass = 'excellent';\n            scoreText = 'EXCELENTE';\n        } else if (score >= 70) {\n            scoreClass = 'good';\n            scoreText = 'BOM';\n        } else if (score >= 50) {\n            scoreClass = 'average';\n            scoreText = 'M√âDIO';\n        }\n\n        // Gerar insights, pontos fortes/fracos\n        const insights = generateInsights(stats, allData.mediaGeral);\n        const strengths = generateStrengths(stats, allData.mediaGeral);\n        const weaknesses = generateWeaknesses(stats, allData.mediaGeral);\n\n        let html = `\n            <!-- MOTOBOY HEADER -->\n            <div class=\"motoboy-header\">\n                <div class=\"motoboy-info\">\n                    <div class=\"motoboy-name\">üèçÔ∏è ${motoboyName}</div>\n                    <div class=\"motoboy-subtitle\">\n                        ${stats.totalRotas} rotas realizadas ‚Ä¢ ${stats.totalEntregas} entregas ‚Ä¢ ${stats.totalKm.toFixed(1)} km percorridos\n                    </div>\n                </div>\n                <div class=\"motoboy-score ${scoreClass}\">\n                    <div class=\"score-label\">Pontua√ß√£o Geral</div>\n                    <div class=\"score-value\">${score.toFixed(0)}</div>\n                    <div class=\"score-text\">${scoreText}</div>\n                </div>\n            </div>\n\n            <!-- STATS GRID -->\n            <div class=\"stats-grid\">\n                <div class=\"stat-card blue\">\n                    <div class=\"stat-label\">üì¶ Total Entregas</div>\n                    <div class=\"stat-value\">${stats.totalEntregas}</div>\n                    <div class=\"stat-subtitle\">${stats.totalEntregues} conclu√≠das</div>\n                    <div class=\"stat-trend ${stats.taxaSucesso >= allData.mediaGeral.taxaSucessoGeral ? 'up' : 'down'}\">\n                        ${stats.taxaSucesso >= allData.mediaGeral.taxaSucessoGeral ? '‚Üó' : '‚Üò'} \n                        ${(stats.taxaSucesso * 100).toFixed(1)}%\n                    </div>\n                </div>\n\n                <div class=\"stat-card green\">\n                    <div class=\"stat-label\">üöö Total de Rotas</div>\n                    <div class=\"stat-value\">${stats.totalRotas}</div>\n                    <div class=\"stat-subtitle\">${(stats.totalEntregas / stats.totalRotas).toFixed(1)} entregas/rota</div>\n                    <div class=\"stat-trend ${stats.totalRotas >= allData.mediaGeral.rotasPorMotoboy ? 'up' : 'neutral'}\">\n                        ${stats.totalRotas >= allData.mediaGeral.rotasPorMotoboy ? '‚Üó Acima' : '‚Üí M√©dia'} da m√©dia\n                    </div>\n                </div>\n\n                <div class=\"stat-card cyan\">\n                    <div class=\"stat-label\">üöó KM Total</div>\n                    <div class=\"stat-value\">${stats.totalKm.toFixed(0)}</div>\n                    <div class=\"stat-subtitle\">${stats.kmPorEntrega.toFixed(2)} km/entrega</div>\n                    <div class=\"stat-trend neutral\">\n                        ${(stats.totalKm / stats.totalRotas).toFixed(1)} km/rota\n                    </div>\n                </div>\n\n                <div class=\"stat-card orange\">\n                    <div class=\"stat-label\">‚è±Ô∏è Tempo M√©dio</div>\n                    <div class=\"stat-value\">${Math.floor(stats.tempoMedio / 60)}</div>\n                    <div class=\"stat-subtitle\">minutos por rota</div>\n                    <div class=\"stat-trend ${stats.tempoMedio <= allData.mediaGeral.tempoMedio ? 'up' : 'down'}\">\n                        ${stats.tempoMedio <= allData.mediaGeral.tempoMedio ? '‚Üó R√°pido' : '‚Üò Lento'}\n                    </div>\n                </div>\n\n                <div class=\"stat-card purple\">\n                    <div class=\"stat-label\">üìä Performance</div>\n                    <div class=\"stat-value\">${(stats.performance * 100).toFixed(0)}%</div>\n                    <div class=\"stat-subtitle\">rotas dentro do prazo</div>\n                    <div class=\"stat-trend ${stats.performance >= 0.8 ? 'up' : stats.performance >= 0.6 ? 'neutral' : 'down'}\">\n                        ${stats.dentroPrazo}/${stats.rotasComDados} rotas\n                    </div>\n                </div>\n\n                <div class=\"stat-card ${stats.atrasos === 0 ? 'green' : stats.atrasos < 3 ? 'orange' : 'red'}\">\n                    <div class=\"stat-label\">üö® Atrasos</div>\n                    <div class=\"stat-value\">${stats.atrasos}</div>\n                    <div class=\"stat-subtitle\">${((stats.atrasos / stats.totalRotas) * 100).toFixed(1)}% das rotas</div>\n                    <div class=\"stat-trend ${stats.atrasos === 0 ? 'up' : stats.atrasos < 3 ? 'neutral' : 'down'}\">\n                        ${stats.atrasos === 0 ? '‚úì Perfeito' : stats.atrasos < 3 ? '‚ö† Aten√ß√£o' : '‚úó Cr√≠tico'}\n                    </div>\n                </div>\n            </div>\n\n            <!-- PERFORMANCE ANALYSIS -->\n            <div class=\"performance-section\">\n                <div class=\"performance-card\">\n                    <div class=\"performance-title\">üí™ Pontos Fortes</div>\n                    ${strengths.map(s => `\n                        <div class=\"strength-item\">\n                            <span class=\"item-icon\">${s.icon}</span>\n                            <span>${s.text}</span>\n                        </div>\n                    `).join('')}\n                </div>\n\n                <div class=\"performance-card\">\n                    <div class=\"performance-title\">‚ö†Ô∏è Pontos de Aten√ß√£o</div>\n                    ${weaknesses.length > 0 ? weaknesses.map(w => `\n                        <div class=\"weakness-item\">\n                            <span class=\"item-icon\">${w.icon}</span>\n                            <span>${w.text}</span>\n                        </div>\n                    `).join('') : '<div style=\"text-align: center; color: #10b981; font-weight: 600; padding: 20px;\">‚úÖ Nenhum ponto de aten√ß√£o identificado!</div>'}\n                </div>\n            </div>\n\n            <!-- INSIGHTS -->\n            <div class=\"insights-section\">\n                <div class=\"insights-title\">üí° An√°lise Detalhada</div>\n                <div class=\"insights-grid\">\n                    ${insights.map(i => `\n                        <div class=\"insight-card ${i.type}\">\n                            <div class=\"insight-icon\">${i.icon}</div>\n                            <div class=\"insight-content\">\n                                <strong>${i.title}</strong>\n                                <span>${i.desc}</span>\n                            </div>\n                        </div>\n                    `).join('')}\n                </div>\n            </div>\n\n            <!-- COMPARISON -->\n            <div class=\"comparison-section\">\n                <div class=\"comparison-title\">üìä Comparativo com a M√©dia Geral</div>\n                \n                <div class=\"comparison-item\">\n                    <div class=\"comparison-label\">Taxa de Sucesso</div>\n                    <div class=\"comparison-values\">\n                        <div class=\"comparison-value\">\n                            <div class=\"comparison-value-label\">Motoboy</div>\n                            <div class=\"comparison-value-number\">${(stats.taxaSucesso * 100).toFixed(1)}%</div>\n                        </div>\n                        <div class=\"comparison-bar\">\n                            <div class=\"comparison-bar-fill\" style=\"width: ${stats.taxaSucesso * 100}%\"></div>\n                        </div>\n                        <div class=\"comparison-value\">\n                            <div class=\"comparison-value-label\">M√©dia</div>\n                            <div class=\"comparison-value-number\">${(allData.mediaGeral.taxaSucessoGeral * 100).toFixed(1)}%</div>\n                        </div>\n                    </div>\n                </div>\n\n                <div class=\"comparison-item\">\n                    <div class=\"comparison-label\">Performance de Tempo</div>\n                    <div class=\"comparison-values\">\n                        <div class=\"comparison-value\">\n                            <div class=\"comparison-value-label\">Motoboy</div>\n                            <div class=\"comparison-value-number\">${(stats.performance * 100).toFixed(0)}%</div>\n                        </div>\n                        <div class=\"comparison-bar\">\n                            <div class=\"comparison-bar-fill\" style=\"width: ${stats.performance * 100}%\"></div>\n                        </div>\n                        <div class=\"comparison-value\">\n                            <div class=\"comparison-value-label\">Meta</div>\n                            <div class=\"comparison-value-number\">80%</div>\n                        </div>\n                    </div>\n                </div>\n\n                <div class=\"comparison-item\">\n                    <div class=\"comparison-label\">Entregas por Rota</div>\n                    <div class=\"comparison-values\">\n                        <div class=\"comparison-value\">\n                            <div class=\"comparison-value-label\">Motoboy</div>\n                            <div class=\"comparison-value-number\">${(stats.totalEntregas / stats.totalRotas).toFixed(1)}</div>\n                        </div>\n                        <div class=\"comparison-bar\">\n                            <div class=\"comparison-bar-fill\" style=\"width: ${Math.min(((stats.totalEntregas / stats.totalRotas) / 20) * 100, 100)}%\"></div>\n                        </div>\n                        <div class=\"comparison-value\">\n                            <div class=\"comparison-value-label\">M√©dia</div>\n                            <div class=\"comparison-value-number\">${(allData.mediaGeral.entregasPorMotoboy / allData.mediaGeral.rotasPorMotoboy).toFixed(1)}</div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <!-- ROUTES TABLE -->\n            <div class=\"routes-section\">\n                <div class=\"routes-title\">\n                    <span>üöö Hist√≥rico de Rotas (${rotas.length})</span>\n                </div>\n                <table>\n                    <thead>\n                        <tr>\n                            <th>SAIDAID</th>\n                            <th>Filial</th>\n                            <th>Data</th>\n                            <th>Entregas</th>\n                            <th>Conclu√≠das</th>\n                            <th>KM</th>\n                            <th>Tempo Real</th>\n                            <th>Tempo Prev.</th>\n                            <th>Performance</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        ${rotas.sort((a, b) => (b.inicioRota || 0) - (a.inicioRota || 0)).map(r => {\n                            let perfBadge = 'badge-danger';\n                            let perfText = 'Sem dados';\n                            if (r.ratio !== null) {\n                                if (r.ratio <= 1.05) {\n                                    perfBadge = 'badge-success';\n                                    perfText = `‚úÖ ${(r.ratio * 100).toFixed(0)}%`;\n                                } else if (r.ratio <= 1.5) {\n                                    perfBadge = 'badge-warning';\n                                    perfText = `‚ö†Ô∏è ${(r.ratio * 100).toFixed(0)}%`;\n                                } else {\n                                    perfBadge = 'badge-danger';\n                                    perfText = `üö® ${(r.ratio * 100).toFixed(0)}%`;\n                                }\n                            }\n\n                            const formatDate = (d) => {\n                                if (!d) return '-';\n                                return d.toLocaleDateString('pt-BR', { day: '2-digit', month: '2-digit' });\n                            };\n\n                            return `\n                                <tr>\n                                    <td class=\"td-strong\">${r.SAIDAID}</td>\n                                    <td>${r.CIDADEFILIAL || '-'}</td>\n                                    <td class=\"td-muted\">${formatDate(r.inicioRota)}</td>\n                                    <td class=\"td-strong\">${r.items.length}</td>\n                                    <td>${r.entregues}</td>\n                                    <td>${r.kmTotal.toFixed(1)} km</td>\n                                    <td>${Math.floor(r.tempoReal / 60)} min</td>\n                                    <td class=\"td-muted\">${Math.floor(r.tempoPrevisto / 60)} min</td>\n                                    <td><span class=\"badge ${perfBadge}\">${perfText}</span></td>\n                                </tr>\n                            `;\n                        }).join('')}\n                    </tbody>\n                </table>\n            </div>\n        `;\n\n        section.innerHTML = html;\n        section.scrollIntoView({ behavior: 'smooth', block: 'start' });\n    }\n\n    // ========================================\n    // GERAR INSIGHTS\n    // ========================================\n    function generateInsights(stats, media) {\n        const insights = [];\n\n        // Taxa de sucesso\n        if (stats.taxaSucesso >= 0.95) {\n            insights.push({\n                type: 'success',\n                icon: 'üéØ',\n                title: 'Taxa de sucesso excepcional!',\n                desc: `${(stats.taxaSucesso * 100).toFixed(1)}% de conclus√£o. Muito acima da m√©dia de ${(media.taxaSucessoGeral * 100).toFixed(1)}%.`\n            });\n        } else if (stats.taxaSucesso < 0.85) {\n            insights.push({\n                type: 'warning',\n                icon: '‚ö†Ô∏è',\n                title: 'Taxa de sucesso abaixo do ideal',\n                desc: `${(stats.taxaSucesso * 100).toFixed(1)}% de conclus√£o. Meta recomendada: 95%.`\n            });\n        }\n\n        // Performance de tempo\n        if (stats.performance >= 0.85) {\n            insights.push({\n                type: 'success',\n                icon: '‚ö°',\n                title: 'Excelente pontualidade!',\n                desc: `${(stats.performance * 100).toFixed(0)}% das rotas dentro do prazo previsto.`\n            });\n        } else if (stats.performance < 0.6) {\n            insights.push({\n                type: 'critical',\n                icon: 'üö®',\n                title: 'Muitos atrasos detectados',\n                desc: `Apenas ${(stats.performance * 100).toFixed(0)}% das rotas no prazo. Requer aten√ß√£o imediata.`\n            });\n        }\n\n        // Experi√™ncia\n        if (stats.totalRotas >= 20) {\n            insights.push({\n                type: 'info',\n                icon: 'üèÜ',\n                title: 'Motoboy experiente',\n                desc: `${stats.totalRotas} rotas realizadas demonstram experi√™ncia e confiabilidade.`\n            });\n        } else if (stats.totalRotas < 5) {\n            insights.push({\n                type: 'info',\n                icon: 'üÜï',\n                title: 'Motoboy em in√≠cio de atividades',\n                desc: `${stats.totalRotas} rotas realizadas. Ainda em fase de adapta√ß√£o.`\n            });\n        }\n\n        // Efici√™ncia de km\n        if (stats.kmPorEntrega < 5) {\n            insights.push({\n                type: 'success',\n                icon: 'üéØ',\n                title: 'Rotas muito eficientes',\n                desc: `M√©dia de ${stats.kmPorEntrega.toFixed(2)} km por entrega indica rotas bem otimizadas.`\n            });\n        }\n\n        return insights;\n    }\n\n    // ========================================\n    // GERAR PONTOS FORTES\n    // ========================================\n    function generateStrengths(stats, media) {\n        const strengths = [];\n\n        if (stats.taxaSucesso >= media.taxaSucessoGeral) {\n            strengths.push({\n                icon: '‚úÖ',\n                text: `Taxa de sucesso ${(stats.taxaSucesso * 100).toFixed(1)}% acima da m√©dia geral`\n            });\n        }\n\n        if (stats.performance >= 0.8) {\n            strengths.push({\n                icon: '‚ö°',\n                text: 'Boa pontualidade - maioria das rotas dentro do prazo'\n            });\n        }\n\n        if (stats.atrasos === 0) {\n            strengths.push({\n                icon: 'üéØ',\n                text: 'Nenhum atraso registrado - perfeito!'\n            });\n        } else if ((stats.atrasos / stats.totalRotas) < 0.1) {\n            strengths.push({\n                icon: 'üëç',\n                text: 'Baixo √≠ndice de atrasos - menos de 10%'\n            });\n        }\n\n        if (stats.tempoMedio <= media.tempoMedio) {\n            strengths.push({\n                icon: 'üöÄ',\n                text: 'Tempo m√©dio de rota abaixo da m√©dia geral'\n            });\n        }\n\n        if (stats.kmPorEntrega < 5) {\n            strengths.push({\n                icon: 'üó∫Ô∏è',\n                text: 'Rotas bem otimizadas com baixa quilometragem'\n            });\n        }\n\n        if (strengths.length === 0) {\n            strengths.push({\n                icon: 'üí™',\n                text: 'Continua trabalhando para melhorar a performance'\n            });\n        }\n\n        return strengths;\n    }\n\n    // ========================================\n    // GERAR PONTOS FRACOS\n    // ========================================\n    function generateWeaknesses(stats, media) {\n        const weaknesses = [];\n\n        if (stats.taxaSucesso < 0.85) {\n            weaknesses.push({\n                icon: 'üìâ',\n                text: `Taxa de sucesso de ${(stats.taxaSucesso * 100).toFixed(1)}% - melhorar conclus√£o de entregas`\n            });\n        }\n\n        if (stats.performance < 0.6) {\n            weaknesses.push({\n                icon: '‚è∞',\n                text: 'Muitos atrasos - revisar planejamento e execu√ß√£o de rotas'\n            });\n        } else if (stats.performance < 0.8) {\n            weaknesses.push({\n                icon: '‚ö†Ô∏è',\n                text: 'Performance de tempo pode melhorar - focar em pontualidade'\n            });\n        }\n\n        if (stats.tempoMedio > media.tempoMedio * 1.2) {\n            weaknesses.push({\n                icon: 'üêå',\n                text: 'Tempo m√©dio 20% acima da m√©dia - buscar mais agilidade'\n            });\n        }\n\n        if (stats.kmPorEntrega > 10) {\n            weaknesses.push({\n                icon: 'üõ£Ô∏è',\n                text: 'Alta quilometragem por entrega - revisar otimiza√ß√£o de rotas'\n            });\n        }\n\n        if ((stats.atrasos / stats.totalRotas) > 0.3) {\n            weaknesses.push({\n                icon: 'üö®',\n                text: 'Mais de 30% das rotas com atraso - requer aten√ß√£o urgente'\n            });\n        }\n\n        return weaknesses;\n    }\n\n    // ========================================\n    // INICIALIZAR AP√ìS DADOS\n    // ========================================\n    window.addEventListener('DOMContentLoaded', function() {\n        console.log('üöÄ DOM carregado...');\n        setTimeout(() => {\n            if (allData.pedidos.length > 0) {\n                initAnalysis();\n            } else {\n                setTimeout(() => initAnalysis(), 500);\n            }\n        }, 200);\n    });\n</script>\n\n<!-- Injetar dados do Appsmith -->\n<script>\n    {{\n        (() => {\n            const pedidos = pedidos_e_saidas_do_dia?.data || [];\n            const calculo = calculo_do_google?.data || { logistica_motoboy: [] };\n            const rotas = dmaplicativo_prod_rotas_otimiz?.data || [];\n            \n            return `\n                console.log('üèçÔ∏è Carregando dados para an√°lise de motoboys...');\n                console.log('üìä Pedidos:', ${pedidos.length});\n                console.log('üìä C√°lculos:', ${(calculo.logistica_motoboy || []).length});\n                console.log('üìä Rotas:', ${rotas.length});\n                \n                allData.pedidos = ${JSON.stringify(pedidos)};\n                allData.calculo = ${JSON.stringify(calculo.logistica_motoboy || [])};\n                allData.rotas = ${JSON.stringify(rotas)};\n                \n                console.log('‚úÖ Dados injetados!');\n                \n                setTimeout(() => {\n                    if (typeof initAnalysis === 'function') {\n                        console.log('üöÄ Iniciando an√°lise...');\n                        initAnalysis();\n                    }\n                }, 150);\n            `;\n        })()\n    }}\n</script>\n\n",
  "topRow": 0,
  "type": "IFRAME_WIDGET",
  "version": 1,
  "widgetId": "bb5ysfphze",
  "widgetName": "Iframe5"
}